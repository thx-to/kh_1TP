<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <title>BURGERZIP CUSTOMER ORDER</title>
  <link rel="stylesheet" th:href="@{/css/style_customer.css}">
</head>


  <style>
    body {
        display: flex;
        justify-content: space-between;
    }

    h2 {
        text-align: center;
    }

    form {
        display: inline;
    }

    button {
        margin-left: 5px;
    }
  </style>

  <script>
    function showAlert() {
        alert("κ²°μ λ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤.");
    }
  </script>

</head>

<body>
<div id="wrap_customer_order_menu">
  <div id="area">
    <div id="header">
      <img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2F64Fyi%2FbtsKopBV7f8%2FV9c159yoKN4R6s0C6HV2i0%2Fimg.png" width="100"/>
      <br><h3>λ²„κ±°μ§‘ CUSTOMER ORDERπ”</h3>
      <p>μ•λ…•ν•μ„Έμ” κ³ κ°λ‹,</p>
      <p>μ ν’ μ£Όλ¬Έ νμ΄μ§€μ…λ‹λ‹¤.</p><br>
    </div>
    <br><br><br>


    <h2>μ£Όλ¬Έ μ§€μ  : <span th:text="${selectedStore}">μ§€μ  μ΄λ¦„</span>π©</h2>
    <br><br>
    <span class="submit"><input type="button" value="μ£Όλ¬Έ μ§€μ  λ‹¤μ‹ μ„ νƒν•κΈ°" onclick="window.location.href='/main/customer/stores';" /></span>
    <br><br>

    <div class="menu">
      <form th:action="@{/main/customer/cart/set}" method="post">
      <h2>μ„ΈνΈλ©”λ‰΄</h2>

      <label>λ²„κ±° μ„ νƒ</label>
      <select class="input" name="burgerName" required>
        <option th:each="menu : ${allMenus}" th:if="${menu.category == 'λ²„κ±°'}" th:value="${menu.menuName}"
                th:text="${menu.menuName}"></option>
      </select>
      <input type="hidden" th:each="menu : ${allMenus}" th:if="${menu.category == 'λ²„κ±°'}" th:value="${menu.price}"
             name="burgerPrice" />

      <br><label>μ‚¬μ΄λ“ μ„ νƒ</label>
      <select class="input" name="sideName" required>
        <option th:each="menu : ${allMenus}" th:if="${menu.category == 'μ‚¬μ΄λ“'}" th:value="${menu.menuName}"
                th:text="${menu.menuName}"></option>
      </select>
      <input type="hidden" th:each="menu : ${allMenus}" th:if="${menu.category == 'μ‚¬μ΄λ“'}" th:value="${menu.price}"
             name="sidePrice" />

      <br><label>μλ£ μ„ νƒ</label>
      <select class="input" name="drinkName" required>
        <option th:each="menu : ${allMenus}" th:if="${menu.category == 'μλ£'}" th:value="${menu.menuName}"
                th:text="${menu.menuName}"></option>
      </select>
      <input type="hidden" th:each="menu : ${allMenus}" th:if="${menu.category == 'μλ£'}" th:value="${menu.price}"
             name="drinkPrice" /><br>

      <label>μ„ΈνΈ μλ‰</label>
      <input class="input" type="number" name="setCount" value="1" min="1" required />
      <br>

        <span class="submit"><input type="submit" value="μ¥λ°”κµ¬λ‹μ— λ‹΄κΈ°" /></span>

    </form>
    </div>

    <div class="menu">
      <h2>λ²„κ±°</h2>
      <ul>
        <li th:each="menu : ${allMenus}" th:if="${menu.category == 'λ²„κ±°'}">
          <span th:text="${menu.menuName}">λ²„κ±° μ΄λ¦„</span> -
          <span th:text="${menu.price}">κ°€κ²©</span> μ›
          <span th:text="${menu.descr}">μ„¤λ…</span>
          <form th:action="@{/main/customer/cart/single}" method="post">
            <input type="hidden" th:value="${menu.menuName}" name="menuName" />
            <input type="hidden" th:value="${menu.price}" name="menuPrice" />
            <input type="number" name="count" value="1" min="1" th:max="${menu.stock}" required />
            <button type="submit">μ¥λ°”κµ¬λ‹μ— λ‹΄κΈ°</button>
          </form>
        </li>
      </ul>

      <h2>μ‚¬μ΄λ“</h2>
      <ul>
        <li th:each="menu : ${allMenus}" th:if="${menu.category == 'μ‚¬μ΄λ“'}">
          <span th:text="${menu.menuName}">μ‚¬μ΄λ“ μ΄λ¦„</span> -
          <span th:text="${menu.price}">κ°€κ²©</span> μ›
          <span th:text="${menu.descr}">μ„¤λ…</span>
          <form th:action="@{/main/customer/cart/single}" method="post">
            <input type="hidden" th:value="${menu.menuName}" name="menuName" />
            <input type="hidden" th:value="${menu.price}" name="menuPrice" />
            <input type="number" name="count" value="1" min="1" th:max="${menu.stock}" required />
            <button type="submit">μ¥λ°”κµ¬λ‹μ— λ‹΄κΈ°</button>
          </form>
        </li>
      </ul>

      <h2>μλ£</h2>
      <ul>
        <li th:each="menu : ${allMenus}" th:if="${menu.category == 'μλ£'}">
          <span th:text="${menu.menuName}">μλ£ μ΄λ¦„</span> -
          <span th:text="${menu.price}">κ°€κ²©</span> μ›
          <span th:text="${menu.descr}">μ„¤λ…</span>
          <form th:action="@{/main/customer/cart/single}" method="post">
            <input type="hidden" th:value="${menu.menuName}" name="menuName" />
            <input type="hidden" th:value="${menu.price}" name="menuPrice" />
            <input type="number" name="count" value="1" min="1" th:max="${menu.stock}" required />
            <button type="submit">μ¥λ°”κµ¬λ‹μ— λ‹΄κΈ°</button>
          </form>
        </li>
      </ul>
    </div>

    <div class="cart">
      <h1>μ¥λ°”κµ¬λ‹</h1>

      <h2>μ„ΈνΈ λ©”λ‰΄</h2>
      <ul>
        <li th:each="setMenu : ${setCart}">
          <span th:text="${setMenu.burger.name}">λ²„κ±° μ΄λ¦„</span> +
          <span th:text="${setMenu.side.name}">μ‚¬μ΄λ“ μ΄λ¦„</span> +
          <span th:text="${setMenu.drink.name}">μλ£ μ΄λ¦„</span> -
          <span th:text="${setMenu.price}">κ°€κ²©</span> μ› -
          <span th:text="${setMenu.count}">μλ‰</span> κ°

          <form th:action="@{/main/customer/cart/updateSet}" method="post" style="display:inline;">
            <input type="hidden" th:value="${setMenu.burger.name}" name="burgerName" />
            <input type="hidden" th:value="${setMenu.side.name}" name="sideName" />
            <input type="hidden" th:value="${setMenu.drink.name}" name="drinkName" />
            <input type="number" name="newCount" th:value="${setMenu.count}" min="1" required />
            <button type="submit">μλ‰ λ³€κ²½</button>
          </form>

          <form th:action="@{/main/customer/cart/removeSet}" method="post" style="display:inline;">
            <input type="hidden" th:value="${setMenu.burger.name}" name="burgerName" />
            <input type="hidden" th:value="${setMenu.side.name}" name="sideName" />
            <input type="hidden" th:value="${setMenu.drink.name}" name="drinkName" />
            <button type="submit">μ‚­μ </button>
          </form>
        </li>
      </ul>

      <h2>λ‹¨μΌ λ©”λ‰΄</h2>
      <ul>
        <li th:each="singleMenu : ${singleCart}">
          <span th:text="${singleMenu.name}">λ©”λ‰΄ μ΄λ¦„</span> -
          <span th:text="${singleMenu.price}">κ°€κ²©</span> μ› -
          <span th:text="${singleMenu.count}">μλ‰</span> κ°

          <form th:action="@{/main/customer/cart/updateSingle}" method="post" style="display:inline;">
            <input type="hidden" th:value="${singleMenu.name}" name="menuName" />
            <input type="number" name="newCount" th:value="${singleMenu.count}" min="1" required />
            <button type="submit">μλ‰ λ³€κ²½</button>
          </form>

          <form th:action="@{/main/customer/cart/removeSingle}" method="post" style="display:inline;">
            <input type="hidden" th:value="${singleMenu.name}" name="menuName" />
            <button type="submit">μ‚­μ </button>
          </form>
        </li>
      </ul>

      <h3>μ΄ ν•©κ³„: <span th:text="${totalPrice}" name="totalPrice">0</span> μ›</h3>

      <div style="display: flex; justify-content: space-between; align-items: center;">
        <form th:action="@{/main/customer/checkout}" method="post" onsubmit="showAlert()">
          <button type="submit">κ²°μ ν•κΈ°</button>
        </form>

        <!-- μ¬κ³  λ¶€μ΅± λ©”μ‹μ§€ ν‘μ‹ -->
        <div th:if="${stockCheckMsg}" style="color: red; margin-left: 10px;">
          <p th:text="${stockCheckMsg}"></p>
        </div>
      </div>
    </div>




  </div>

</div>



</body>

</html>